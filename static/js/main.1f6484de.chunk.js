(this["webpackJsonptfjs-yolov5-example"]=this["webpackJsonptfjs-yolov5-example"]||[]).push([[0],{238:function(e,t,a){e.exports=a(239)},239:function(e,t,a){"use strict";a.r(t);var o=a(76),n=a.n(o),i=a(214),s=a.n(i),r=a(215),c=a.n(r);a(246);const l=a(282),h=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],[d,p]=[640,640];class m extends n.a.Component{constructor(){super(...arguments),this.state={model:null,preview:"",predictions:[]},this.onDrop=(e,t,a)=>{this.setState({preview:e[0].preview||a[0]})},this.cropToCanvas=(e,t,a)=>{const o=e.naturalWidth,n=e.naturalHeight;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#000000",a.fillRect(0,0,t.width,t.height);const i=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),s=Math.round(o*i),r=Math.round(n*i);a.drawImage(e,0,0,o,n,(t.width-s)/2,(t.height-r)/2,s,r)},this.onImageChange=e=>{const t=document.getElementById("canvas"),a=t.getContext("2d");this.cropToCanvas(e.target,t,a);const o=l.tidy(()=>l.image.resizeBilinear(l.browser.fromPixels(t),[d,p]).div(255).expandDims(0));this.state.model.executeAsync(o).then(e=>{const o="16px sans-serif";a.font=o,a.textBaseline="top";const[n,i,s,r]=e,c=n.dataSync(),d=i.dataSync(),p=s.dataSync(),m=r.dataSync()[0];var g;for(l.dispose(e),g=0;g<m;++g){let[e,n,i,s]=c.slice(4*g,4*(g+1));e*=t.width,i*=t.width,n*=t.height,s*=t.height;const r=i-e,l=s-n,m=h[p[g]],u=d[g].toFixed(2);a.strokeStyle="#00FFFF",a.lineWidth=4,a.strokeRect(e,n,r,l),a.fillStyle="#00FFFF";const f=a.measureText(m+":"+u).width,b=parseInt(o,10);a.fillRect(e,n,f+4,b+4)}for(g=0;g<m;++g){let[e,o,,]=c.slice(4*g,4*(g+1));e*=t.width,o*=t.height;const n=h[p[g]],i=d[g].toFixed(2);a.fillStyle="#000000",a.fillText(n+":"+i,e,o)}})}}componentDidMount(){l.loadGraphModel("/web_model/model.json").then(e=>{this.setState({model:e})})}render(){return n.a.createElement("div",{className:"Dropzone-page"},this.state.model?n.a.createElement(c.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop},this.state.preview?n.a.createElement("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",n.a.createElement("canvas",{id:"canvas",width:"640",height:"640"})):n.a.createElement("div",{className:"Dropzone"},"Loading model..."))}}const g=document.getElementById("root");s.a.render(n.a.createElement(m,null),g)},246:function(e,t,a){},251:function(e,t){},252:function(e,t){},260:function(e,t){},270:function(e,t){},271:function(e,t){},272:function(e,t){},273:function(e,t){},281:function(e,t){}},[[238,1,2]]]);
//# sourceMappingURL=main.1f6484de.chunk.js.map